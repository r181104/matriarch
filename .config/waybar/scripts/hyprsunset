#!/bin/bash

# Config
TEMP=4500
GAMMA=100

PIDFILE="/tmp/hyprsunset.pid"

case "$1" in
  toggle)
    if [ -f "$PIDFILE" ]; then
      if kill -0 "$(cat "$PIDFILE")" 2>/dev/null; then
        kill "$(cat "$PIDFILE")"
      fi
      rm -f "$PIDFILE"
      echo -n "OFF"
    else
      hyprsunset -t $TEMP --gamma $GAMMA >/dev/null 2>&1 &
      echo $! >"$PIDFILE"
      echo -n "ON"
    fi
    ;;
  status)
    if [ -f "$PIDFILE" ] && kill -0 "$(cat "$PIDFILE")" 2>/dev/null; then
      echo -n "ON"
    else
      echo -n "OFF"
    fi
    ;;
  *)
    echo "Usage: $0 {toggle|status}"
    ;;
esac
