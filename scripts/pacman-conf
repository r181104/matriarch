#!/bin/sh

# WARN: Read everything in this script carefully before running and change anything
# if you know what you are doing (recommend no touching i wrote it good)
set -e

CONF_PATH="/etc/pacman.conf"
BACKUP_PATH="/etc/pacman.conf.bak.$(date +%Y%m%d-%H%M%S)"

# Backup existing config
if [ -f "$CONF_PATH" ]; then
    echo "Backing up existing pacman.conf to $BACKUP_PATH"
    sudo cp "$CONF_PATH" "$BACKUP_PATH"
fi

# Write new config
sudo tee "$CONF_PATH" >/dev/null <<'EOF'
[options]
Color
ILoveCandy
CleanMethod = KeepCurrent
IgnorePkg = linux firefox
HoldPkg = pacman glibc
Architecture = auto
CheckSpace
ParallelDownloads = 8
DownloadUser = alpm
SigLevel = Required DatabaseOptional
LocalFileSigLevel = Optional
DisableDownloadTimeout

#[core-testing]
#Include = /etc/pacman.d/mirrorlist

[core]
Include = /etc/pacman.d/mirrorlist

#[extra-testing]
#Include = /etc/pacman.d/mirrorlist

[extra]
Include = /etc/pacman.d/mirrorlist

# If you want to run 32 bit applications on your x86_64 system,
# enable the multilib repositories as required here.

#[multilib-testing]
#Include = /etc/pacman.d/mirrorlist

[multilib]
Include = /etc/pacman.d/mirrorlist

# [blackarch]
# Include = /etc/pacman.d/blackarch-mirrorlist
EOF

echo "âœ… New pacman.conf applied successfully!"
